:root{
  --bg:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --card:#ffffff;
  --shadow:0 1px 2px rgba(0,0,0,0.06);
  --radius:14px;
  --gap:14px;
  --maxw:1240px;
  --font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  --brand:#2563eb;
  --brand2:#1d4ed8;
  --pill:#f8fafc;
}

html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  margin: 0;
}

#_dash-app-content { min-height: 100vh; }

.container {
  max-width: var(--maxw);
  margin: 0 auto;
  padding: 18px 18px 44px 18px;
}

.header {
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  margin-bottom:14px;
}

.subtle { color: var(--muted); font-size:0.95rem; }

.navbar {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin: 10px 0 14px 0;
}

.nav-link {
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  background: var(--pill);
  color: var(--text);
  text-decoration:none;
  font-weight:600;
  font-size:0.95rem;
  transition: transform .08s ease, border-color .08s ease, background .08s ease;
}

.nav-link:hover {
  border-color: #cbd5e1;
  background: #ffffff;
  transform: translateY(-1px);
}

.nav-link.active {
  background: rgba(37,99,235,0.10);
  border-color: rgba(37,99,235,0.35);
  color: var(--brand2);
}

.row {
  display:flex;
  gap: var(--gap);
  align-items: stretch;
  flex-wrap: wrap;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 14px;
}

.card h3 { margin: 0 0 10px 0; font-size: 1.05rem; }

.controls { flex: 1 1 330px; min-width: 320px; }
.results  { flex: 2 1 560px; min-width: 420px; }

.control-label { font-size: 0.92rem; margin-top: 10px; margin-bottom: 6px; }
.small-note { color: var(--muted); font-size: 0.85rem; margin-top: 6px; }

.kpi-grid {
  display:grid;
  grid-template-columns: repeat(4, minmax(160px, 1fr));
  gap: 10px;
}

.kpi {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
}

.kpi .kpi-title { font-size: 0.82rem; color: var(--muted); margin-bottom: 6px; }
.kpi .kpi-value { font-size: 1.25rem; font-weight: 700; }

@media (max-width: 980px){
  .kpi-grid{ grid-template-columns: repeat(2, minmax(160px, 1fr)); }
}

.graph-title { font-size: 0.95rem; font-weight: 700; margin: 0 0 8px 2px; }

.footer-note { margin-top: 16px; color: var(--muted); font-size: 0.85rem; }

hr.sep {
  border: none;
  border-top: 1px solid var(--border);
  margin: 14px 0;
}

/* Prevent the "infinite growth" feel: graphs get explicit heights in components.
   Also keep Plotly containers from inheriting odd CSS heights. */
.js-plotly-plot, .plot-container { max-height: 100%; }
